// Load sidebar
fetch("sidebar.html")
  .then(res => res.text())
  .then(html => {
    document.getElementById("sidebarContainer").innerHTML = html;

    const sidebar = document.getElementById("sidebar");
    const current = window.location.pathname.split("/").pop();
    document.querySelectorAll("#sidebar nav a").forEach(link => {
      if (link.getAttribute("href") === current) {
        link.classList.add("active");
      }
      link.addEventListener("click", () => {
        if (window.innerWidth <= 768) {
          sidebar.classList.add("collapsed");
          sidebarOverlay.classList.remove("active");
        }
      });
    });

    const btnToggleSidebar = document.getElementById("btnToggleSidebar");
    btnToggleSidebar.addEventListener("click", () => {
      sidebar.classList.toggle("collapsed");
      if (window.innerWidth <= 768) {
        sidebarOverlay.classList.toggle("active");
      }
    });

    sidebarOverlay.addEventListener("click", () => {
      sidebar.classList.add("collapsed");
      sidebarOverlay.classList.remove("active");
    });

    if (window.innerWidth <= 768) {
      sidebar.classList.add("collapsed");
    }
  });
